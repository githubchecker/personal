# 1. Overview

# Introduction to Relationships

In EF Core, a **Relationship** defines how two entity types relate to each other. EF Core maps between the object-oriented references (Navigations) and the relational database constraints (Foreign Keys).

## 1. Terminology

| Term | Description | Example |
| --- | --- | --- |
| **Navigation** | A property on an entity that points to a related entity or collection. | `Blog.Posts`, `Post.Blog` |
| **Principal Entity** | The entity that contains the Primary Key (PK) being referenced. | `Blog` |
| **Dependent Entity** | The entity that contains the Foreign Key (FK) referencing the principal. | `Post` |
| **Foreign Key (FK)** | The property in the dependent entity that stores the PK of the principal. | `Post.BlogId` |

## 2. Relationships in SQL vs. C#

### Relational Database (SQL)

Relationships are enforced via Foreign Key constraints.

```sql
CREATE TABLE [Posts] (
    [Id] int PRIMARY KEY,
    [BlogId] int REFERENCES [Blogs] ([Id])
);

```

### Object Model (C#)

Relationships are represented by Reference properties or Collections.

```csharp
public class Blog
{
    public int Id { get; set; }
    public ICollection<Post> Posts { get; } // Collection Navigation
}

public class Post
{
    public int Id { get; set; }
    public int BlogId { get; set; }        // Foreign Key
    public Blog Blog { get; set; }         // Reference Navigation
}

```

## 3. Configuring Relationships

While EF Core can often discover relationships by convention, you can explicitly configure them using the Fluent API in `OnModelCreating`.

```csharp
protected override void OnModelCreating(ModelBuilder modelBuilder)
{
    modelBuilder.Entity<Blog>()
        .HasMany(b => b.Posts)      // Principal side
        .WithOne(p => p.Blog)       // Dependent side
        .HasForeignKey(p => p.BlogId);
}

```

## 4. Relationship Types

- **One-to-Many:** One principal relates to many dependents (e.g., Blog → Posts).
- **One-to-One:** One principal relates to exactly one dependent (e.g., User → Profile).
- **Many-to-Many:** Multiple entities on both sides (e.g., Student ↔ Course).

## 5. Usage in EF Core

- **Querying:** Load related data using **Eager Loading** (`.Include()`), **Lazy Loading**, or **Explicit Loading** (`.Load()`).
- **Data Seeding:** Define relationships in initial data sets.
- **Change Tracking:** The context monitors relationship changes (fixup) and updates FK values in the database during `SaveChanges`.