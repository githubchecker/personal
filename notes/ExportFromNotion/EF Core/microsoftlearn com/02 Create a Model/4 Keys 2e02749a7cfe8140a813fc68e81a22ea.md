# 4. Keys

# Keys

A **Key** is a unique identifier for an entity instance. Every entity (except keyless entities) must have a **Primary Key**.

## 1. Primary Keys

### Conventions

By default, EF Core looks for a property named `Id` or `[TypeName]Id` to use as the Primary Key.

### Explicit Configuration

- **Fluent API:** `modelBuilder.Entity<Car>().HasKey(c => c.LicensePlate);`
- **Data Annotations:** `[Key]`

### Composite Keys (Multiple Properties)

- **Fluent API:** `modelBuilder.Entity<Car>().HasKey(c => new { c.State, c.LicensePlate });`
- **Data Annotations (EF 7+):** `[PrimaryKey(nameof(State), nameof(LicensePlate))]`

## 2. Key Customization

### Value Generation

- **Numeric PKs:** Set to `IDENTITY` (auto-increment) by default in SQL Server.
- **GUID PKs:** Automatically generated by the client or database.

### Primary Key Name

Relational databases name the constraint `PK_[TableName]` by default. You can override this:

```csharp
modelBuilder.Entity<Blog>()
    .HasKey(b => b.BlogId)
    .HasName("PrimaryKey_BlogId");

```

## 3. Alternate Keys

An **Alternate Key** is a unique identifier (other than the primary key) that can be used as the target of a relationship (Foreign Key).

### Configuration

Relational providers implement alternate keys as unique constraints.

```csharp
modelBuilder.Entity<Car>()
    .HasAlternateKey(c => c.LicensePlate);

```

### Composite Alternate Keys

```csharp
modelBuilder.Entity<Car>()
    .HasAlternateKey(c => new { c.State, c.LicensePlate });

```

### Alternate Key Name

```csharp
modelBuilder.Entity<Car>()
    .HasAlternateKey(c => c.LicensePlate)
    .HasName("AK_LicensePlate");

```

<aside>
ðŸ’¡ Use a **Unique Index** if you only need to enforce uniqueness. Use an **Alternate Key** if you need to reference the column as a principal key in a foreign key relationship.

</aside>