# Use web API analyzers




ASP.NET Core provides an MVC analyzers package intended for use with web API projects. The analyzers work with controllers annotated with [ApiControllerAttribute](https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.apicontrollerattribute), while building on [web API conventions](https://learn.microsoft.com/en-us/aspnet/core/conventions?view=aspnetcore-10.0).

The analyzers package notifies you of any controller action that:

* Returns an undeclared status code.
* Returns an undeclared success result.
* Documents a status code that isn't returned.
* Includes an explicit model validation check.

## Reference the analyzer package

The analyzers are included in the .NET SDK. To enable the analyzer in your project, include the  `IncludeOpenAPIAnalyzers`  property in the project file:

```xml
<PropertyGroup>
 <IncludeOpenAPIAnalyzers>true</IncludeOpenAPIAnalyzers>
</PropertyGroup>
```

## Analyzers for web API conventions

OpenAPI documents contain status codes and response types that an action may return. In ASP.NET Core MVC, attributes such as [ProducesResponseTypeAttribute](https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.producesresponsetypeattribute) and [ProducesAttribute](https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.producesattribute) are used to document an action. [ASP.NET Core web API documentation with Swagger / OpenAPI](https://learn.microsoft.com/en-us/tutorials/web-api-help-pages-using-swagger?view=aspnetcore-10.0) goes into further detail on documenting your web API.

One of the analyzers in the package inspects controllers annotated with [ApiControllerAttribute](https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.apicontrollerattribute) and identifies actions that don't entirely document their responses. Consider the following example:

```csharp
// GET api/contacts/{guid}
[HttpGet("{id}", Name = "GetById")]
[ProducesResponseType(typeof(Contact), StatusCodes.Status200OK)]
public IActionResult Get(string id)
{
    var contact = _contacts.Get(id);

    if (contact == null)
    {
        return NotFound();
    }

    return Ok(contact);
}
```

The preceding action documents the HTTP 200 success return type but doesn't document the HTTP 404 failure status code. The analyzer reports the missing documentation for the HTTP 404 status code as a warning. An option to fix the problem is provided.

![analyzer reporting a warning](https://learn.microsoft.com/en-us/aspnet/core/conventions/_static/analyzer.gif?view=aspnetcore-10.0)

## Analyzers require Microsoft.NET.Sdk.Web

Analyzers don't work with library projects or projects referencing  `Sdk="Microsoft.NET.Sdk"` .