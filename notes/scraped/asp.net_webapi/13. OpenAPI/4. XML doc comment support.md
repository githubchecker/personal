# OpenAPI XML documentation comment support in ASP.NET Core




ASP.NET Core XML documentation processing extracts code comments automatically to populate API documentation, ensuring the code and documentation remain synchronized. Metadata from XML documentation comments is included in the generated OpenAPI document without requiring changes to the app code, as long as the project is configured to generate the XML documentation file. XML documentation comments are automatically detected in the application assembly and referenced assemblies with XML documentation enabled.

ASP.NET Core processes [XML documentation tags](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/xmldoc/recommended-tags) like:  `<c>` ,  `<code>` ,  `<list>` ,  `<para>` ,  `<paramref>` ,  `<typeparamref>` ,  `<see>` , and  `<seealso>` . For XML documentation tags that use references to other elements, like  `<see cref="SomeOtherType">` , the implementation strips out the XML tag and maps the reference to plain text for inclusion in the OpenAPI document.

ASP.NET Core XML documentation processing doesn't affect runtime performance. The source generator processes XML documentation at compile time and caches the results, with minimal runtime overhead when rendering the OpenAPI documentation. Furthermore, the OpenAPI document can be cached at runtime using [output-caching](https://learn.microsoft.com/en-us/aspnet/core/performance/caching/overview#output-caching) to further optimize performance.

This article includes a [sample app](https://learn.microsoft.com/en-us/aspnet/core/#download10) that demonstrates the [ `Microsoft.AspNetCore.OpenApi` ](https://www.nuget.org/packages/Microsoft.AspNetCore.OpenApi) package's ability to integrate XML documentation comments on types into OpenAPI documents. The sample app is a minimal ASP.NET Core Web API project to generate OpenAPI documents. The XML documentation comments are used to populate summaries, descriptions, parameter information, and response details in the generated OpenAPI document.

The following image shows the Scalar UI with XML documentation comments integrated into the OpenAPI document of the sample app:

![screenshot of app with XML comments in sclaar UI](https://learn.microsoft.com/en-us/aspnet/core/_static/screenshot.png?view=aspnetcore-10.0)

### Supported XML documentation tags

* [ `<summary>` ](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/xmldoc/recommended-tags#summary)
* [ `<remarks>` ](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/xmldoc/recommended-tags#remarks)
* [ `<param>` ](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/xmldoc/recommended-tags#param)
* [ `<returns>` ](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/xmldoc/recommended-tags#returns)
* [ `<response>` ](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/xmldoc/recommended-tags#response)
* [ `<example>` ](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/xmldoc/recommended-tags#example)
* [ `<deprecated>` ](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/xmldoc/recommended-tags#deprecated)
* [ `<inheritdoc>` ](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/xmldoc/recommended-tags#inheritdoc)

### Document HTTP responses

Document HTTP responses with the  `<response>`  tag and the  `code`  attribute:

```csharp
/// <summary>
/// Retrieves a specific project board by ID.
/// </summary>
/// <param name="id">The ID of the project board to retrieve.</param>
/// <returns>The requested project board.</returns>
/// <response code="200">Returns the requested project board.</response>
/// <response code="404">If the project board is not found.</response>
public static IResult GetProjectBoardById(int id)
{
    var board = Boards.FirstOrDefault(b => b.Id == id);
    if (board == null)
    {
        return Results.NotFound();
    }
    return Results.Ok(board);
}
```

### Add examples

To add examples to documentation, use the [ `<example>` ](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/xmldoc/recommended-tags#example) tag for types or the  `example`  attribute for parameters:

```csharp
/// <example>{"name":"Sample","value":42}</example>
/// <param name="id" example="42">The unique identifier</param>
```

## Customizing XML documentation behavior

The following sections describe how to enable and customize XML documentation support.

### Enable XML documentation in an ASP.NET Core API project

1. Enable XML documentation in the project file:

   ```xml
   <Project Sdk="Microsoft.NET.Sdk">

     <PropertyGroup>
       <TargetFramework>net10.0</TargetFramework>
       <ImplicitUsings>enable</ImplicitUsings>
       <Nullable>enable</Nullable>
       <GenerateDocumentationFile>true</GenerateDocumentationFile>
     </PropertyGroup>

   </Project>
   ```
2. Use the [AddOpenApi](https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.dependencyinjection.openapiservicecollectionextensions.addopenapi) method in the service configuration. No configuration is needed, the source generator handles the rest.

   ```csharp
   using Api;
   using Scalar.AspNetCore;

   var builder = WebApplication.CreateBuilder(args);

   builder.Services.AddOpenApi();

   var app = builder.Build();

   if (app.Environment.IsDevelopment())
   {
       app.MapOpenApi();
       app.MapScalarApiReference();
   }

   app.Map("/", () => Results.Redirect("/scalar/v1"));
   app.MapProjectBoardApis();
   app.MapTodoApis();

   app.Run();
   ```

The source generator detects all standard overloads:

* [ `AddOpenApi()` ](https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.dependencyinjection.openapiservicecollectionextensions.addopenapi#microsoft-extensions-dependencyinjection-openapiservicecollectionextensions-addopenapi(microsoft-extensions-dependencyinjection-iservicecollection))
* [ `AddOpenApi("v1")` ](https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.dependencyinjection.openapiservicecollectionextensions.addopenapi#microsoft-extensions-dependencyinjection-openapiservicecollectionextensions-addopenapi(microsoft-extensions-dependencyinjection-iservicecollection-system-string))
* [ `AddOpenApi(options => {})` ](https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.dependencyinjection.openapiservicecollectionextensions.addopenapi#microsoft-extensions-dependencyinjection-openapiservicecollectionextensions-addopenapi(microsoft-extensions-dependencyinjection-iservicecollection-system-action((microsoft-aspnetcore-openapi-openapioptions))))
* [ `AddOpenApi("v1", options => {})` ](https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.dependencyinjection.openapiservicecollectionextensions.addopenapi#microsoft-extensions-dependencyinjection-openapiservicecollectionextensions-addopenapi(microsoft-extensions-dependencyinjection-iservicecollection-system-string-system-action((microsoft-aspnetcore-openapi-openapioptions))))

Each overload is intercepted to automatically include the XML documentation transformers. The source generator doesn't handle overloads where the  `documentName`  parameter isn't a literal string expression. For example, the transformer isn't registered in the following scenarios:

```csharp
var documentName = "v1";
builder.Services.AddOpenApi(documentName); // No XML support
```

### Add XML documentation sources

The [ `Microsoft.AspNetCore.OpenApi` ](https://www.nuget.org/packages/Microsoft.AspNetCore.OpenApi) NuGet package automatically resolves XML documentation comments from:

* The application assembly, when the  `GenerateDocumentationFile`  property is set. In the [sample app](https://learn.microsoft.com/en-us/aspnet/core/#download10), the  `API`  project.

  ```xml
  <Project Sdk="Microsoft.NET.Sdk">

    <PropertyGroup>
      <TargetFramework>net10.0</TargetFramework>
      <ImplicitUsings>enable</ImplicitUsings>
      <Nullable>enable</Nullable>
      <GenerateDocumentationFile>true</GenerateDocumentationFile>
    </PropertyGroup>

  </Project>
  ```
* Any projects referenced via  `ProjectReferences`  that have the  `GenerateDocumentationFile`  property set. In the sample app, the  `Models`  project:

  ```xml
  <Project Sdk="Microsoft.NET.Sdk.Web">

    <PropertyGroup>
      <TargetFramework>net10.0</TargetFramework>
      <Nullable>enable</Nullable>
      <ImplicitUsings>enable</ImplicitUsings>
      <GenerateDocumentationFile>true</GenerateDocumentationFile>
    </PropertyGroup>

    <ItemGroup>
      <PackageReference Include="Microsoft.AspNetCore.OpenApi" Version="10.0.0-preview.2.25161.17" />
      <PackageReference Include="Scalar.AspNetCore" Version="2.0.30" />
    </ItemGroup>

    <ItemGroup>
      <ProjectReference Include="..\models\Models.csproj" />
    </ItemGroup>

  </Project>
  ```

The implementation discovers XML files statically at compile-time. The  `AdditionalFiles`  item group specifies additional sources for XML files:

```xml
<ItemGroup>
  <PackageReference Include="Some.Package" Version="10.0.0"
                    GeneratePathProperty="true" />
</ItemGroup>

<ItemGroup>
  <AdditionalFiles Include="$(PkgSome_Package)/lib/net10.0/Some.Package.xml" />
</ItemGroup>
```

To include XML documentation files from referenced assemblies, add them as  `AdditionalFiles`  in the project:

```xml
<ItemGroup>
  <AdditionalFiles Include="Path/To/AssemblyDoc.xml" />
</ItemGroup>
```

XML doc comment processing can be configured to access XML comments in other assemblies. This is useful for generating documentation for types that are defined outside the current assembly, such as the  `ProblemDetails`  type in the  `Microsoft.AspNetCore.Http`  namespace. This configuration is done with directives in the project build file. The following example shows how to configure the XML comment generator to access XML comments for types in the  `Microsoft.AspNetCore.Http`  assembly, which includes the  `ProblemDetails`  class:

```xml
<Target Name="AddOpenApiDependencies" AfterTargets="ResolveReferences">
  <ItemGroup>
    <AdditionalFiles
          Include="@(ReferencePath->'
            %(RootDir)%(Directory)%(Filename).xml')"
          Condition="'%(ReferencePath.Filename)' ==
           'Microsoft.AspNetCore.Http.Abstractions'"
          KeepMetadata="Identity;HintPath" />
  </ItemGroup>
</Target>
```

#### Disabling XML documentation support

To turn off XML documentation integration, remove the source generator from the  `Analyzers`  item group. Removing the source generator prevents it from being used during compilation.

```xml
<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>
    <GenerateDocumentationFile>true</GenerateDocumentationFile>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.AspNetCore.OpenApi" Version="10.0.0-preview.2.25161.17" />
    <PackageReference Include="Scalar.AspNetCore" Version="2.0.30" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\models\Models.csproj" />
  </ItemGroup>

  <Target Name="DisableCompileTimeOpenApiXmlGenerator" BeforeTargets="CoreCompile">
    <ItemGroup>
      <Analyzer Remove="$(PkgMicrosoft_AspNetCore_OpenApi)/analyzers/dotnet/cs/Microsoft.AspNetCore.OpenApi.SourceGenerators.dll" />
    </ItemGroup>
  </Target>

</Project>
```

## Source generator implementation

The XML documentation feature is implemented as a source generator. The source generator analyzes XML documentation comments at compile time and injects code that translates these comments into OpenAPI metadata. The [ `XmlCommentGenerator` ](https://source.dot.net/#Microsoft.AspNetCore.OpenApi.SourceGenerators/XmlCommentGenerator.cs,30eb0aa73ef6306a) extracts XML comments from two sources:

* XML documentation files passed as  `AdditionalFiles`  via a [ `ParseXmlFile` ](https://source.dot.net/#Microsoft.AspNetCore.OpenApi.SourceGenerators/XmlCommentGenerator.Parser.cs,f7dff3af661aebc2) implementation.
* XML comments from the target assembly's own code via a [ `ParseCompilation` ](https://source.dot.net/#Microsoft.AspNetCore.OpenApi.SourceGenerators/XmlCommentGenerator.Parser.cs,45358a4d0fff76ac) implementation.

The distinction between these two sources is important. XML documentation files passed as  `AdditionalFiles`  are static. XML comments from the target assembly come from Roslyn's  [XML documentation comments provider](https://github.com/dotnet/roslyn/blob/main/src/Compilers/Core/Portable/MetadataReference/PortableExecutableReference.cs#L48-L62). The XML documentation comments provider enhances functionality for connecting an XML comment to the compilation symbol's that it's associated with. This has implications for the way  `<inheritdoc />`  resolution happens in the implementation, discussed in the next section.

XML comments are parsed into structured  `XmlComment`  objects with:

* Summary, description, remarks, returns, value sections.
* Parameter documentation with name, description, examples.
* Response documentation with status codes and descriptions.
* Support for examples and deprecated markers.

### Handling of complex types

XML comment processing produces accurate and complete OpenApi descriptions for a wide range of types and supports complex scenarios. But if an error is encountered when processing a complex types, the process bypasses the type gracefully.

In this way, scenarios that might have resulted in build errors now simply result in missing metadata, helping to avoid build failures.

XML documentation comments from referenced assemblies are correctly merged even when their documentation IDs include return type suffixes. As a result, all valid XML comments are reliably included in generated OpenAPI documentation, improving documentation accuracy and completeness for APIs using referenced assemblies.

### `<inheritdoc/>`

The generator supports [ `<inheritdoc>` ](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/xmldoc/recommended-tags#inheritdoc) tags, which inherit documentation *as long as they exist in the compilation assembly*.  `<inheritdoc />`  tags indicate that comments must be resolved from:

* Base classes
* Implemented interfaces
* Base methods for overrides

When  `<inheritdoc />`  is placed on a symbol, The source generator:

* Uses its knowledge of the symbol in the compilation to discover base classes and interfaces associated with the symbol.
* Supports resolving them automatically
* Substitutes generic type parameters in inherited documentation comments, preserving type references across inheritance boundaries.

The automatic resolution behavior is currently available for XML documentation comments that exist in the assembly under compilation, and ***not*** XML documentation tags that are in referenced projects or packages. In the later scenario, XML documentation comments:

* Are only presented as text.
* Don't provide a trivial strategy for:
  + Associating the text content to compilation symbols.
  + Developing an understanding of the inheritance hierarchy associated with the types.

XML documentation comments from  `ProjectReferences`  are automatically resolved and don't require additional configuration.

## Download and run the API sample

Download the [sample code](https://github.com/dotnet/AspNetCore.Docs/tree/main/aspnetcore/fundamentals/openapi/samples) for this article.

To run the sample, navigate to the  `api`  directory and enter  `dotnet run` .

```dotnetcli
cd api
dotnet run
```

Output similar to the following is displayed:

```dotnetcli
Building...
info: Microsoft.Hosting.Lifetime[14]
      Now listening on: http://localhost:5052
info: Microsoft.Hosting.Lifetime[0]
      Application started. Press Ctrl+C to shut down.
info: Microsoft.Hosting.Lifetime[0]
      Hosting environment: Development
info: Microsoft.Hosting.Lifetime[0]
      Content root path: ~/git/aspnet-openapi-xml/api
```

Navigate to [http://localhost:5052/](http://localhost:5052/) to view the Scalar UI for interacting with the app. The Scalar UI includes summaries and descriptions on various elements sourced from XML documentation comments.